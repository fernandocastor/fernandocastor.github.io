<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Fernando Castor&#39;s rants</title>
    <description>The opinions expressed here are the sole responsibility of the author.
</description>
    <link>http://fernandocastor.github.io/</link>
    <atom:link href="http://fernandocastor.github.io/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Fri, 30 Oct 2015 16:40:37 -0300</pubDate>
    <lastBuildDate>Fri, 30 Oct 2015 16:40:37 -0300</lastBuildDate>
    <generator>Jekyll v2.5.3</generator>
    
      <item>
        <title>Two very interesting empirical studies presented at SPLASH&#39;2015</title>
        <description>&lt;p&gt;Today at &lt;a href=&quot;http://www.splashcon.com&quot;&gt;SPLASH&lt;/a&gt;, there was an OOPSLA session on empirical studies. All the four papers of the session were very interesting and well-presented. Two of them caught my attention in particular, due to affinity of my own research [&lt;a href=&quot;https://sites.google.com/a/cin.ufpe.br/castor/Pinto_2015_LSS_JSS.pdf?attredirects=0&amp;amp;d=1&quot;&gt;1&lt;/a&gt;,&lt;a href=&quot;https://sites.google.com/a/cin.ufpe.br/castor/msr_2015_submitted.pdf?attredirects=0&amp;amp;d=1&quot;&gt;2&lt;/a&gt;,&lt;a href=&quot;https://sites.google.com/a/cin.ufpe.br/castor/msr_2014_cr.pdf?attredirects=0&amp;amp;d=1&quot;&gt;3&lt;/a&gt;,&lt;a href=&quot;https://sites.google.com/a/cin.ufpe.br/castor/Ebert_2015_ESE_JSS.pdf?attredirects=0&amp;amp;d=1&quot;&gt;4&lt;/a&gt;] with their areas. I discuss them below.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://2015.splashcon.org&quot;&gt;&lt;img src=&quot;http://www.dynamic-languages-symposium.org/dls-15/media/splash15_logo.png&quot; alt=&quot;SPLASH&#39;2015 logo&quot; title=&quot;2015.splashcon.org&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;how-scale-affects-structure-in-java-programshttpdlacmorgcitationcfmid2814300cfid555774425cftoken10047354-by-crista-lopes-joel-ossher&quot;&gt;&lt;a href=&quot;http://dl.acm.org/citation.cfm?id=2814300&amp;amp;CFID=555774425&amp;amp;CFTOKEN=10047354&quot;&gt;How Scale Affects Structure in Java Programs&lt;/a&gt; by Crista Lopes, Joel Ossher&lt;/h4&gt;

&lt;p&gt;I was already familiar with this paper, having discussed it with some students in &lt;a href=&quot;http://twiki.cin.ufpe.br/twiki/bin/view/TAES/TAES2201502&quot;&gt;class&lt;/a&gt; a couple of weeks ago. It is a very interesting piece of work showing how the size of a software system is correlated with certain characteristics (nothing new there) but also showing that &lt;strong&gt;this relationship changes as the size of a system grows&lt;/strong&gt; (previously an &lt;strong&gt;unverified&lt;/strong&gt; hypothesis, at least on a large scale study). This is strongly related to the 1975 &lt;a href=&quot;https://www.google.com/url?sa=t&amp;amp;rct=j&amp;amp;q=&amp;amp;esrc=s&amp;amp;source=web&amp;amp;cd=2&amp;amp;cad=rja&amp;amp;uact=8&amp;amp;ved=0CCgQFjABahUKEwjAmfvx8-rIAhWF1h4KHZCdAvY&amp;amp;url=http%3A%2F%2Fwww.cs.umd.edu%2Fclass%2Fspring2005%2Fcmsc838p%2FGeneral%2Fpitl.pdf&amp;amp;usg=AFQjCNH4ihfX6lE2HK9tVhJUm9-7lIEG4g&amp;amp;sig2=A_ORzeazyaS54QTxN63rbg&quot;&gt;paper&lt;/a&gt; by DeRemer and Kron. The first sentence of this classifical paper summarizes its ideas very well: &lt;em&gt;“We distinguish the activity of writing large programs from that of writing small ones”&lt;/em&gt;. Lopes and Ossher’s study provides a considerable amount of data showing that this idea is verifiable. &lt;/p&gt;

&lt;p&gt;I also like how the paper emphasizes the importance of &lt;strong&gt;studying non-linear relationships&lt;/strong&gt; between variables pertaining to programs. For example, the study reports that the number of lines of code (LoC) in a program grows exponentially with respect to the number of modules (classes + interfaces), even though the exponent is small (1.0939). Thus as the paper itself explains, if a program with 10 modules has 400 LoC, we can expect a program with 100 modules to have 4965 LoC, instead of just 4000. Of course, this is a general trend and not something that will be observed for every program. Nonetheless, the observed data comprises more than 30.000 Java projects. This number suggests that the findings are robust and not likely to stem from chance. &lt;/p&gt;

&lt;p&gt;It is important to point out that the paper only investigated one &lt;strong&gt;software population&lt;/strong&gt;, that of Java projects hosted on Google Code until 2012. This does not necessarily reflect the characteristics of populations from other forges or based on different programming languages. Moreover, the study did not investigate the temporal dimension of these relationships. These are great news for researchers interested in this topic!&lt;/p&gt;

&lt;h4 id=&quot;use-at-your-own-risk-the-java-unsafe-api-in-the-wildhttpdlacmorgcitationcfmid2814313cfid555774425cftoken10047354-by-luis-mastrangelo-luca-ponzanelli-andrea-mocci-michele-lanza-matthias-hauswirth-nathaniel-nystrom&quot;&gt;&lt;a href=&quot;http://dl.acm.org/citation.cfm?id=2814313&amp;amp;CFID=555774425&amp;amp;CFTOKEN=10047354&quot;&gt;Use at Your Own Risk: The Java Unsafe API in the Wild&lt;/a&gt; by Luis Mastrangelo, Luca Ponzanelli, Andrea Mocci, Michele Lanza, Matthias Hauswirth, Nathaniel Nystrom&lt;/h4&gt;

&lt;p&gt;This paper investigates one of those not-well-known, dirty little secrets. Java is type safe (and &lt;a href=&quot;http://research.microsoft.com/apps/pubs/default.aspx?id=68466&quot;&gt;type sound&lt;/a&gt;) and memory safe. This means that problems that stop an application from proceeding at runtime should be signaled as &lt;code&gt;Exception&lt;/code&gt;s or, in the worst case scenario (e.g., due to lack of heap space), as an &lt;code&gt;Error&lt;/code&gt;. Thus, in theory, one should never be able to crash the JVM. However, Java has this API, &lt;code&gt;sun.misc.Unsafe&lt;/code&gt; which, as the name implies, is not safe. This means that it is capable of performing operations that violate Java’s safety guarantees. Operations that allow one, for example, to affect memory alignment and to allocate memory without initializing an object. &lt;/p&gt;

&lt;p&gt;The study of Mastrangelo and colleagues was exploratory in nature. It aimed to assess the extent to which &lt;code&gt;Unsafe&lt;/code&gt; is used and how it is used. For that end, they used Apache’s Maven Central Repository as the data source. This repository has more than 950,000 artifacts (the results of builds). Considering only the latest versions of the artifacts and filtering out the undesired ones, they ended up with a corpus of 86479 artifacts amounting to 74GB of data. Among these artifacts, 817 use &lt;code&gt;Unsafe&lt;/code&gt;, less than 1%. This low number led the authors to investigate whether these artifacts are widely used or if they are isolated pieces of software. As it turns out, large-scale, well-known projects employ them. Notable examples include Scala, Ruby, Spring, Hibernate, Grails, Stream, Cassandra, Hadoop, Akka, Storm, and Neo4J. In their corpus, 21,297 artifacts indirectly use &lt;code&gt;Unsafe&lt;/code&gt;, almost 25% of all the analyzed artifacts. It is not clear to me whether “indirectly” means transitively or with just one level of indirection. I’ll have to check that out in the paper later. &lt;/p&gt;

&lt;p&gt;Proceeding with the analysis, they investigated which features of &lt;code&gt;Unsafe&lt;/code&gt; are often used and why. Examples include instructions to (i) query the memory layout; (ii) put and get elements in specific memory locations, e.g., in the heap; and (iii) compare-and-set instructions, which are very important for concurrent applications. These instructions are often used to improve performance. The authors documented 14 usage patterns, including processing of byte arrays in block, the aforementioned atomic operations and, amazingly, &lt;strong&gt;updates to &lt;code&gt;final&lt;/code&gt; fields&lt;/strong&gt;! The authors also analyzed questions that developers ask about &lt;code&gt;Unsafe&lt;/code&gt; at &lt;a href=&quot;http://www.stackoverflow.com&quot;&gt;StackOverflow&lt;/a&gt;. There don’t seem to be many questions on the topic, which is not surprising. The authors found out that lack of documentation is an important problem, though.&lt;/p&gt;

&lt;p&gt;This left me (and at least another member of the audience, it seems) wondering about which parts of &lt;code&gt;Unsafe&lt;/code&gt; are unsafe-r. The authors did not go that far, however. I’m not sure there is enough data to conduct that study yet.&lt;/p&gt;

&lt;h4 id=&quot;the-bottom-line&quot;&gt;The bottom line&lt;/h4&gt;

&lt;p&gt;Both studies raise new avenues for research, as I have discussed previously. In particular, for the first study, it would be interesting to (i) replicate it with different populations; (ii) examine the temporal dimension and how the discovered relationships change throughout system versions; (iii) examine different attributes, e.g., usage of constructs related to concurrency or testing. For the second one, I can imagine a number of controlled experiments focusing on the usage of &lt;code&gt;Unsafe&lt;/code&gt; features and examination of bug reports (for a large number of systems) in an attempt to identify the unsafe-st parts of the API.&lt;/p&gt;
</description>
        <pubDate>Fri, 30 Oct 2015 11:54:06 -0300</pubDate>
        <link>http://fernandocastor.github.io/general/2015/10/30/unsafe-java-api.html</link>
        <guid isPermaLink="true">http://fernandocastor.github.io/general/2015/10/30/unsafe-java-api.html</guid>
        
        
        <category>general</category>
        
      </item>
    
      <item>
        <title>The Most Popular Questions About Concurrency on StackOverflow</title>
        <description>&lt;p&gt;We have conducted a study on the most popular questions about concurrent programming on &lt;a href=&quot;http://www.stackoverflow.com&quot;&gt;StackOverflow&lt;/a&gt;. Our goal with this study was to understand the practical problems faced by software developers when using concurrent programming abstractions. These are the 10 most popular questions:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/588866/&quot;&gt;Q588866&lt;/a&gt; “What’s the difference between the atomic and nonatomic attributes?”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/541487/&quot;&gt;Q541487&lt;/a&gt; “‘implements Runnable’ vs. ‘extends Thread’”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/6319146/&quot;&gt;Q6319146&lt;/a&gt; “C++11 introduced a standardized memory model. What does it mean? And how is it going to affect C++ programming?”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/200469/&quot;&gt;Q200469&lt;/a&gt; “What is the difference between a process and a thread”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/661561/&quot;&gt;Q661561&lt;/a&gt; “How to update the GUI from another thread in C#?”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/1036754/&quot;&gt;Q1036754&lt;/a&gt; “Difference between wait() and sleep()”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/62814/&quot;&gt;Q62814&lt;/a&gt; “Difference between binary semaphore and mutex”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/817856/&quot;&gt;Q817856&lt;/a&gt; “When and how should I use a ThreadLocal variable?”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/510632/&quot;&gt;Q510632&lt;/a&gt; “What’s the difference between ConcurrentHashMap and Collections.synchronizedMap(Map)?”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/323972/&quot;&gt;Q323972&lt;/a&gt; “Is there any way to kill a Thread in Python?”&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Among the top 10, we have questions specific to Objective-C (1), Java (2,6,9), C++ (3), C# (5), and Python (10). There are also a couple of questions asking about general concepts (3,7) and one that may be thought of as language specific or not (8). &lt;/p&gt;

&lt;h2 id=&quot;what-are-concurrency-related-questions&quot;&gt;What are concurrency-related questions?&lt;/h2&gt;
&lt;p&gt;We used the same keywords as the well-known &lt;a href=&quot;http://dl.acm.org/citation.cfm?id=1346323&quot;&gt;study&lt;/a&gt; by Shan Lu and colleagues to select the questions based on the tags associated to them: “race(s)”, “deadlock(s)”, “livelock(s)”, “concurrency”, “lock(s)”, “mutex(es)”, “atomic”, “compete(s)”, and “multithreading”.&lt;/p&gt;

&lt;p&gt;This produced a list with more than 22000 questions. We then ranked them by popularity, extracted only the 250 most popular, and manually inspected those to ascertain that they were actually concurrency-related. We ended up with 231 questions.&lt;/p&gt;

&lt;h2 id=&quot;how-did-we-measure-popularity&quot;&gt;How did we measure popularity?&lt;/h2&gt;
&lt;p&gt;To calculate the popularity of each question, we obtained, for each one: (i) number of up-votes; (ii) number of times the question is marked as favorite; (iii) number of views; (iv) number of comments; and (v) and number of answers. Each of these metrics was then normalized with respect to the average value considering all the questions in StackOverflow. The &lt;strong&gt;P&lt;/strong&gt; popularity measure is the result of calculating the geometric mean of these normalized metrics.&lt;/p&gt;

&lt;h2 id=&quot;summary&quot;&gt;Summary&lt;/h2&gt;
&lt;p&gt;Most of the questions pertained to either Java (77) or C# (60). Also, 28 pertained to mobile computing, focusing on one of the most popular platforms: iOS (6), Android (7), and Windows Phone (15).&lt;/p&gt;

&lt;p&gt;We classified the questions in terms of 7 categories:  &lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Theoretical Concepts (59)
    &lt;ul&gt;
      &lt;li&gt;Q34510 “What is a race condition?”&lt;/li&gt;
      &lt;li&gt;Q588866 “What’s the difference between the atomic and nonatomic attributes?”&lt;/li&gt;
      &lt;li&gt;Q200469 “What is the difference between a process and a thread?”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Practical Concepts  (51)
    &lt;ul&gt;
      &lt;li&gt;Q817856 “When and how should I use a ThreadLocal variable?”&lt;/li&gt;
      &lt;li&gt;Q154551 “Which [synchronization] approach should be used [to increment an int]?”&lt;/li&gt;
      &lt;li&gt;Q251391 “Why is lock(this) {. . . } bad?”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;First Steps (29)
    &lt;ul&gt;
      &lt;li&gt;Q2846653 “Trying to find a simple example that clearly shows a single task being divided for multi-threading.”&lt;/li&gt;
      &lt;li&gt;Q3360555 “How to pass parameters to ThreadStart method in Thread?”&lt;/li&gt;
      &lt;li&gt;Q2734025 “Is javascript guaranteed to be single-threaded?”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Thread Life-Cycle (18)
    &lt;ul&gt;
      &lt;li&gt;Q1520887 “How to pause / sleep thread or process in Android?”&lt;/li&gt;
      &lt;li&gt;Q323972 “Is there any way to kill a Thread in Python?”&lt;/li&gt;
      &lt;li&gt;Q289434 “How to make a Java thread wait for another thread’s output?”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Technical Problems (53)
    &lt;ul&gt;
      &lt;li&gt;Q661561 “How to update the GUI from another thread in C#?”&lt;/li&gt;
      &lt;li&gt;Q530211 “[How to] create a blocking Queue&lt;t&gt; in .NET?&quot;&lt;/t&gt;&lt;/li&gt;
      &lt;li&gt;Q16159203 “Why does this Java program terminate despite that apparently it shouldn’t (and didn’t)?”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Concurrent Lib/Framework (15 Q)
    &lt;ul&gt;
      &lt;li&gt;Q3629784 “How is Node.js inherently faster when it still relies on Threads internally?”&lt;/li&gt;
      &lt;li&gt;Q6916385 “Is there a concurrent List in Java’s JDK?”&lt;/li&gt;
      &lt;li&gt;Q3847108 “What is the Haskell response to Node.js?&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Correctness (10 Q)
    &lt;ul&gt;
      &lt;li&gt;Q9666 “Is accessing a variable in C# an atomic operation?”&lt;/li&gt;
      &lt;li&gt;Q7095 “Is the C# constructor thread safe?”&lt;/li&gt;
      &lt;li&gt;Q680097 “I’ve heard i++ isn’t thread safe, is ++i thread-safe?”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Among all the questions, only one pertained to GPUs and not a single one asked specifically about improving performance, which is surprising. I could say that we learned three main things from this study: &lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Developers do not understand the problems that existing tools report about concurrency errors, because they often do not understand the errors themselves. Error reports that provide actual code examples have a stronger potential to be useful (see the third point below)&lt;/li&gt;
  &lt;li&gt;Tools that help developers to build the software right, instead of trying to right the system after it’s built are useful. For example, a simple tool that indicates to developers which parts of the code execute atomically is straightforward to build and could be easily integrated into existing IDEs&lt;/li&gt;
  &lt;li&gt;Developers want examples, both minimal examples of things that work correctly and minimal examples of code that help them understand concurrency problems. &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;For more information, take a look at our &lt;a href=&quot;http://gustavopinto.org/lost+found/plateau2015.pdf&quot;&gt;paper&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Wed, 28 Oct 2015 08:39:06 -0300</pubDate>
        <link>http://fernandocastor.github.io/concurrency/2015/10/28/the-most-popular-questions-on-stackoverflow.html</link>
        <guid isPermaLink="true">http://fernandocastor.github.io/concurrency/2015/10/28/the-most-popular-questions-on-stackoverflow.html</guid>
        
        
        <category>concurrency</category>
        
      </item>
    
      <item>
        <title>Haskell one-liner</title>
        <description>&lt;p&gt;One of these days, &lt;a href=&quot;http://www.twitter.com/1haskelladay&quot;&gt;@1HaskellADay&lt;/a&gt; posted the following programming challenge: &lt;/p&gt;

&lt;p&gt;&lt;em&gt;#1Liner You’re given either fst or snd, but don’t know which. Define a function that returns its dual: dual :: ((a,a) -&amp;gt; a) -&amp;gt; ((a,a) -&amp;gt; a)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;My answer to the challenge was fairly straightforward: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-haskell&quot; data-lang=&quot;haskell&quot;&gt;&lt;span class=&quot;nf&quot;&gt;dual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;It’s not bad, but nothing compared to &lt;a href=&quot;http://www.twitter.com/frsoares&quot;&gt;Francisco Soares&lt;/a&gt;’ &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-haskell&quot; data-lang=&quot;haskell&quot;&gt;&lt;span class=&quot;nf&quot;&gt;dual&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;uncurry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;flip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;curry&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This is how real Haskell programmers do it. Those that &lt;a href=&quot;http://www.bernstein-plus-sons.com/RPDEQ.html&quot; title=&quot;Real programmers don&#39;t eat quiche&quot;&gt;do not eat quiche&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Mon, 26 Oct 2015 08:39:06 -0300</pubDate>
        <link>http://fernandocastor.github.io/general/2015/10/26/haskell-one-liner.html</link>
        <guid isPermaLink="true">http://fernandocastor.github.io/general/2015/10/26/haskell-one-liner.html</guid>
        
        
        <category>general</category>
        
      </item>
    
  </channel>
</rss>
